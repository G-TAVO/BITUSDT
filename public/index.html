<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>BITUSDT - Simulador Financiero</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* ==== CSS ==== */
body{
  background:linear-gradient(120deg,#0f2027,#203a43,#2c5364);
  font-family:Arial;
  color:white;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  min-height:100vh;
  padding:20px 0;
}

.app{
  background:#111;
  padding:25px;
  width:400px;
  border-radius:15px;
  box-shadow:0 0 20px #00ffc8;
  text-align:center;
}

h1{
  color:#00ffc8;
  margin-bottom:5px;
}

.sub{
  color:#aaa;
  margin-bottom:15px;
}

.tabs button{
  background:#222;
  color:white;
  border:none;
  padding:10px;
  margin:3px;
  border-radius:5px;
  cursor:pointer;
}

section{
  display:none;
  margin-top:15px;
  text-align:left;
}

.active{
  display:block;
}

input{
  width:100%;
  padding:10px;
  margin:6px 0;
  border:none;
  border-radius:5px;
}

button{
  width:100%;
  padding:10px;
  background:#00ffc8;
  border:none;
  border-radius:5px;
  font-weight:bold;
  cursor:pointer;
}

button:hover{
  background:#00c9a7;
}

p{
  font-size:14px;
  margin-top:5px;
}

table{
  width:100%;
  border-collapse: collapse;
  margin-top:10px;
}

th, td{
  border:1px solid #00ffc8;
  padding:5px;
  text-align:center;
}

th{
  background:#00ffc8;
  color:#111;
}
</style>
</head>
<body>
<div class="app">
<h1> BITUSDT</h1>
<p class="sub">Simulador financiero</p>

<div class="tabs">
  <button onclick="show('login')">Login</button>
  <button onclick="show('register')">Registro</button>
  <button onclick="show('forgot')">Recuperar</button>
  <button onclick="show('panel')">Panel</button>
  <button onclick="show('admin')">Admin</button>
</div>

<!-- LOGIN -->
<section id="login" class="active">
<h2>Iniciar sesi贸n</h2>
<input id="l_email" placeholder="Correo">
<input id="l_pass" type="password" placeholder="Contrase帽a">
<label><input type="checkbox" onclick="ver('l_pass')"> Ver</label>
<button onclick="login()">Entrar</button>
<p id="l_msg"></p>
</section>

<!-- REGISTRO -->
<section id="register">
<h2>Crear cuenta</h2>
<input id="r_email" placeholder="Correo">
<input id="r_pass" type="password" placeholder="Contrase帽a">
<input id="wallet" placeholder="Tu billetera de Binance">
<label><input type="checkbox" onclick="ver('r_pass')"> Ver contrase帽a</label>
<button onclick="register()">Registrarse</button>
<p id="r_msg"></p>
</section>

<!-- RECUPERAR -->
<section id="forgot">
<h2>Recuperar clave</h2>
<input id="f_email" placeholder="Correo registrado">
<button onclick="forgot()">Enviar</button>
<p id="f_msg"></p>
</section>

<!-- PANEL USUARIO -->
<section id="panel">
<h2>Panel Cliente</h2>
<p>Email: <span id="userEmail"></span></p>
<p>Saldo: <span id="saldoTxt">0</span> USDT</p>
<p>Ganancias hoy: <span id="hoyTxt">0</span> USDT</p>
<p>Total Ganancias: <span id="totalTxt">0</span> USDT</p>
<p>Tu billetera: <span id="userWallet"></span></p>
<p>Billetera de la plataforma: <span id="platformWallet">PLATAFORMA123</span></p>

<input id="amount" placeholder="Monto a invertir">
<button onclick="solicitarInversion()">Solicitar inversi贸n</button>
<button onclick="solicitarRetiro()">Solicitar retiro ($4 comisi贸n, m铆nimo $20)</button>
<button onclick="logout()">Salir</button>

<p id="userMsg"></p>
</section>

<!-- PANEL ADMIN -->
<section id="admin">
<h2>Panel Admin</h2>
<p>Email admin: admin@bitusdt.com</p>
<table id="adminTable">
<tr>
<th>Email</th>
<th>Saldo</th>
<th>Wallet</th>
<th>Inversi贸n pendiente</th>
<th>Retiro pendiente</th>
<th>Acciones</th>
</tr>
</table>
</section>

</div>

<script>
/* ==== JS ==== */
let users = []; // Lista de usuarios en memoria
let currentUser = null;

// Mostrar secci贸n
function show(id){
  document.querySelectorAll("section").forEach(s=>s.style.display="none");
  document.getElementById(id).style.display="block";
}

// Ver/Ocultar contrase帽a
function ver(id){
  let p=document.getElementById(id);
  p.type = p.type==="password"?"text":"password";
}

// Registro
function register(){
  if(!r_email.value || !r_pass.value){
    r_msg.innerText="Completa correo y contrase帽a";
    return;
  }
  let user = {
    email:r_email.value,
    password:r_pass.value,
    rol:"user",
    saldo:0,
    hoy:0,
    total:0,
    wallet:wallet.value || "No registrada",
    solicitudInversion:0,
    solicitudRetiro:0
  };
  users.push(user);
  r_msg.innerText="Registro exitoso";
  alert("Usuario registrado: "+user.email);
  show('login');
}

// Login
function login(){
  let email = l_email.value;
  let pass = l_pass.value;
  if(email==="admin@bitusdt.com" && pass==="admin123"){
    currentUser = {rol:"admin", email};
    showAdmin();
    alert("Bienvenido Admin");
    return;
  }
  let u = users.find(x=>x.email===email && x.password===pass);
  if(u){
    currentUser = u;
    showPanelUser();
    alert("Bienvenido "+u.email);
  } else{
    l_msg.innerText="Correo o contrase帽a incorrectos";
  }
}

// Panel usuario
function showPanelUser(){
  userEmail.innerText = currentUser.email;
  userWallet.innerText = currentUser.wallet;
  updatePanel();
  show('panel');
}

// Solicitar inversi贸n
function solicitarInversion(){
  let val=parseInt(amount.value);
  if(isNaN(val) || val<=0){ alert("Monto inv谩lido"); return; }
  currentUser.solicitudInversion = val;
  userMsg.innerText="Inversi贸n solicitada. Esperando aprobaci贸n del admin.";
  amount.value="";
  showAdminTable();
}

// Solicitar retiro
function solicitarRetiro(){
  if(currentUser.saldo<20){
    alert("Saldo insuficiente para retirar. M铆nimo $20");
    return;
  }
  currentUser.solicitudRetiro = currentUser.saldo;
  userMsg.innerText="Retiro solicitado. Esperando aprobaci贸n del admin.";
  showAdminTable();
}

// Actualizar panel usuario
function updatePanel(){
  saldoTxt.innerText=currentUser.saldo;
  hoyTxt.innerText=currentUser.hoy.toFixed(2);
  totalTxt.innerText=currentUser.total.toFixed(2);
}

// Logout
function logout(){
  currentUser=null;
  show('login');
}

// PANEL ADMIN
function showAdmin(){
  show('admin');
  showAdminTable();
}

function showAdminTable(){
  let table = document.getElementById("adminTable");
  table.innerHTML = `
<tr>
<th>Email</th>
<th>Saldo</th>
<th>Wallet</th>
<th>Inversi贸n pendiente</th>
<th>Retiro pendiente</th>
<th>Acciones</th>
</tr>`;
  users.forEach((u,i)=>{
    let row = table.insertRow();
    row.insertCell(0).innerText=u.email;
    row.insertCell(1).innerText=u.saldo;
    row.insertCell(2).innerText=u.wallet;
    row.insertCell(3).innerText=u.solicitudInversion;
    row.insertCell(4).innerText=u.solicitudRetiro;
    let actionCell = row.insertCell(5);
    if(u.solicitudInversion>0){
      let btn = document.createElement("button");
      btn.innerText="Aprobar inversi贸n";
      btn.onclick = ()=>aprobarInversion(u);
      actionCell.appendChild(btn);
    }
    if(u.solicitudRetiro>0){
      let btn2 = document.createElement("button");
      btn2.innerText="Aprobar retiro";
      btn2.onclick = ()=>aprobarRetiro(u);
      actionCell.appendChild(btn2);
    }
  });
}

// Aprobar inversi贸n
function aprobarInversion(u){
  u.saldo += u.solicitudInversion;
  u.hoy += u.solicitudInversion*0.05;
  u.total += u.solicitudInversion*0.05;
  u.solicitudInversion = 0;
  showAdminTable();
  if(currentUser && currentUser.email===u.email) updatePanel();
  alert("Inversi贸n aprobada para "+u.email);
}

// Aprobar retiro
function aprobarRetiro(u){
  let comision=4;
  let recibido = u.solicitudRetiro - comision;
  alert("Retiro aprobado para "+u.email+
        "\nMonto: "+u.solicitudRetiro+
        "\nComisi贸n: "+comision+
        "\nRecibir谩 (simulado): "+recibido);
  u.saldo=0; u.hoy=0; u.total=0; u.solicitudRetiro=0;
  showAdminTable();
  if(currentUser && currentUser.email===u.email) updatePanel();
}

</script>
</body>
</html>

